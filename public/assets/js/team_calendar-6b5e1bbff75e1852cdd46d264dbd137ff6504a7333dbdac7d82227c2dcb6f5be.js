!function(e){e(document).ready(function(){function t(t){e.ajax({url:"/projects/"+s+"/edit_teamEvent/"+n.other.id,type:"post",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json",success:function(){}})}function a(t){e("#teameventIndex").val(),e("#teamEventName").val(),e("#teamEventDesc").val(),e("#teamEvent-date").html(moment(t.start).format("MMM, D dddd")),e("#teamlblfromTime").html(moment(t.start).format("h:mm A")),e("#teamlbltoTime").html(moment(t.end).format("h:mm A")),e("#teameventIndex").val(t.index),e("#teamEventName").val(t.title),e("#teamEventDesc").val(t.other.desc),e("#teamEventStartDate").val(moment(t.start).format("YYYY-MM-DDThh:mm")),e("#teamEventEndDate").val(moment(t.end).format("YYYY-MM-DDThh:mm"))}var n,s=e("#project_id").val(),o=e("#teamCalendar_month");o.pagescalendar({events:[],view:"month",onViewRenderComplete:function(){},onEventClick:function(t){e("#teamcalendar-event").hasClass("open")||e("#teamcalendar-event").addClass("open"),n=t,e.ajax({url:"/projects/"+s+"/current_load_teamEvent/"+n.other.id,type:"post",success:function(t){var a={};a.other={id:t.id,desc:t.content},a.title=t.title,a.content=t.content,a["class"]="bg-success-lighter",a.start=t.start_date,a.end=t.end_date,e("#teameventname").val(a.title),e("#teameventdesc").val(a.content)}}),a(n)},onEventDragComplete:function(e){n=e,t(n),a(n)},onTimeSlotDblClick:function(t){e("#teamcalendar-event").removeClass("open");var c={title:"my new event","class":"bg-success-lighter",start:t.date,end:moment(t.date).add(1,"hour").format(),allDay:!1,other:{desc:""}};n=c,e.ajax({url:"/projects/"+s+"/create_teamEvent",type:"post",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),dataType:"json",success:function(){e.ajax({url:"/projects/"+s+"/new_load_teamEvent",type:"post",success:function(e){var t={};t.other={id:e.id,desc:e.content},t.title=e.title,t["class"]="bg-success-lighter",t.start=e.start_date,t.end=e.end_date,o.pagescalendar("addEvent",t)}})}}),a(n)}}),e("#eventExit").click(function(){e("#teamcalendar-event").removeClass("open")}),e("#teameventSave").on("click",function(){n.title=e("#teamEventName").val(),n.other.desc=e("#teamEventDesc").val(),n.start=e("#teamEventStartDate").val(),n.end=e("#teamEventEndDate").val(),o.pagescalendar("updateEvent",n),t(n),e("#teamcalendar-event").removeClass("open")}),e("#teameventDelete").on("click",function(){o.pagescalendar("removeEvent",e("#teameventIndex").val()),e.ajax({url:"/projects/"+s+"/delete_teamEvent/"+n.other.id,type:"delete",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),dataType:"json",success:function(){}}),e("#teamcalendar-event").removeClass("open")}),e.ajax({url:"/projects/"+s+"/load_teamEvent",type:"post",success:function(e){for(var t in e){var a={};a.other={id:e[t].id,desc:e[t].content},a.title=e[t].title,a["class"]="bg-success-lighter",a.start=e[t].start_date,a.end=e[t].end_date,o.pagescalendar("addEvent",a)}}})})}(window.jQuery);